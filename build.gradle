plugins {
  id "com.github.node-gradle.node" version "7.0.0"
}

task installNpm(type: Exec) {
  commandLine 'npm', 'install'
}

task runBuild(dependsOn: 'installNpm') {
  doLast {
    exec {
        commandLine 'npx', 'rimraf', './dist', '&&', 'tsc'
    }
    println 'Build Done!'
  }
}

task runTest(type: Exec) {
    commandLine 'npm', 'run', 'test'
}

task runDocs(type: Exec) {
  commandLine 'jsdoc', '-c', 'jsdoc.json'
}

task runPlantUML(type: Exec) {
  commandLine 'sh', 'bin/generate-plantuml-diagrams.sh'
}